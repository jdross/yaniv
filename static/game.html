<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yaniv</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="game-page">

  <!-- JOIN (shown when visiting a room you're not a member of) -->
  <div id="join-screen" class="lobby hidden">
    <div class="lobby-inner">
      <h1 class="logo">Yaniv</h1>
      <div class="room-code-box">
        <span class="room-code-label">Room code</span>
        <span id="join-code" class="room-code"></span>
      </div>
      <div id="join-players" class="lobby-players"></div>
      <div id="join-form" class="">
        <div class="form-group" style="text-align:left">
          <label for="join-name-input">Your name</label>
          <input id="join-name-input" type="text" maxlength="20" placeholder="Enter your name" autocomplete="off">
        </div>
        <button id="join-btn" class="btn btn-primary btn-large">Join Game</button>
      </div>
      <div id="join-claim-form" class="hidden">
        <div class="form-group" style="text-align:left">
          <label for="join-player-select">Play as</label>
          <select id="join-player-select"></select>
        </div>
        <button id="join-claim-btn" class="btn btn-primary btn-large">Play as Selected Player</button>
      </div>
      <p id="join-full-msg" class="join-full-msg hidden">This room is full (4 players). You can watch but not join.</p>
      <p id="join-started-msg" class="join-full-msg hidden">This game has finished. You can watch results but not join.</p>
      <p id="join-error" class="error-msg"></p>
    </div>
  </div>

  <!-- LOBBY -->
  <div id="lobby" class="lobby hidden">
    <div class="lobby-inner">
      <h1 class="logo">Yaniv</h1>
      <div class="room-code-box">
        <span class="room-code-label">Room code</span>
        <span id="lobby-code" class="room-code"></span>
      </div>
      <div class="share-link-row">
        <button id="share-btn" class="share-btn">Copy link</button>
      </div>
      <div id="lobby-players" class="lobby-players"></div>
      <button id="start-btn" class="btn btn-primary btn-large">Start Game</button>
      <div id="lobby-options" class="lobby-options hidden">
        <label class="option-toggle">
          <input type="checkbox" id="slamdowns-checkbox">
          Allow Slamdowns
        </label>
      </div>
      <p id="lobby-error" class="error-msg"></p>
    </div>
  </div>

  <!-- GAME BOARD -->
  <div id="board" class="board hidden">
    <!-- Scores -->
    <div class="score-bar" id="score-bar"></div>

    <!-- Turn log (last 3 plays, animated) -->
    <div id="turn-log" class="turn-log"></div>

    <!-- Turn status -->
    <div id="turn-status" class="turn-status"></div>

    <!-- Draw section ‚Äî always visible; interactive only on your turn -->
    <div id="draw-section" class="draw-section">
      <div class="draw-section-inner">
        <div class="draw-group">
          <div class="section-label">Deck</div>
          <div id="deck-btn" class="draw-choice deck-choice" data-draw="deck">
            <div class="deck-icon">üÇ†</div>
            <span id="deck-size-label"></span>
          </div>
        </div>
        <div class="draw-group" id="pile-draw-group">
          <div class="section-label">Pile <span class="pile-hint" id="pile-hint"></span></div>
          <div id="draw-options" class="card-row draw-row"></div>
        </div>
      </div>
    </div>

    <!-- Hand panel -->
    <div class="hand-panel">
      <!-- Your hand -->
      <div class="section-label your-hand-label">Your hand <span id="hand-value" class="hand-value"></span></div>
      <div id="hand" class="card-row hand-row"></div>

      <!-- Key hints -->
      <div class="key-hints">Keys: <kbd>1</kbd>‚Äì<kbd>5</kbd> select cards &nbsp; <kbd>D</kbd> cycle draw &nbsp; <kbd>Enter</kbd> play &nbsp; <kbd>Y</kbd> Yaniv</div>

      <!-- Actions -->
      <div class="action-bar">
        <button id="yaniv-btn" class="btn btn-yaniv hidden">üéâ Yaniv!</button>
        <button id="slamdown-btn" class="btn btn-slamdown hidden">üí• Slamdown!</button>
        <button id="play-btn" class="btn btn-primary" disabled>Play turn</button>
      </div>

      <p id="game-error" class="error-msg"></p>
    </div>
  </div>

  <!-- GAME OVER -->
  <div id="gameover" class="gameover hidden">
    <div class="gameover-inner">
      <h1>üèÜ Game Over!</h1>
      <p id="winner-text" class="winner-text"></p>
      <div id="final-scores" class="final-scores"></div>
      <button id="play-again-btn" class="btn btn-primary">Play again</button>
    </div>
  </div>

  <!-- ROUND RESULT MODAL -->
  <div id="round-result-modal" class="round-result-modal hidden" aria-hidden="true">
    <div class="round-result-card" role="dialog" aria-modal="true" aria-label="Round summary">
      <div id="round-result-content" class="round-result-content"></div>
      <div class="round-result-footer">
        <button id="round-result-continue" class="btn btn-primary">Continue</button>
      </div>
    </div>
  </div>

  <script src="/js/shared/pid.js"></script>
  <script src="/js/shared/game-logic.js"></script>
  <script src="/js/game/core.js"></script>
  <script src="/js/game/animations.js"></script>
  <script src="/js/game/render.js"></script>
  <script src="/js/game/actions.js"></script>
  <script src="/js/game/main.js"></script>
</body>
</html>
